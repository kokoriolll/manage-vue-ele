{"remainingRequest":"C:\\Users\\ASUS\\Desktop\\project1\\manage-vue-ele\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ASUS\\Desktop\\project1\\manage-vue-ele\\vue-element-admin\\src\\views\\exam\\adduser\\adduser.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ASUS\\Desktop\\project1\\manage-vue-ele\\vue-element-admin\\src\\views\\exam\\adduser\\adduser.vue","mtime":1555378271425},{"path":"C:\\Users\\ASUS\\Desktop\\project1\\manage-vue-ele\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1555468404974},{"path":"C:\\Users\\ASUS\\Desktop\\project1\\manage-vue-ele\\vue-element-admin\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1555468400994},{"path":"C:\\Users\\ASUS\\Desktop\\project1\\manage-vue-ele\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1555468404974},{"path":"C:\\Users\\ASUS\\Desktop\\project1\\manage-vue-ele\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1555468458169}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { mapState, mapActions, mapMutations } from \"vuex\";\r\nimport { constants } from \"fs\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      userId: \"\",\r\n      userName: \"\",\r\n      pwd: \"\",\r\n      identityId: \"\",\r\n      identityName: \"\",\r\n      apiJurisdictionName: \"\",\r\n      apiJurisdictionUrl: \"\",\r\n      apiJurisdictionMethod: \"\",\r\n      existingView: \"\",\r\n      apiJurisdictionId: \"\",\r\n      viewJurisdictionId: \"\",\r\n      idx: 0,\r\n      existingViewValue: [\r\n        {\r\n          value: \"选项1\",\r\n          label: \"黄金糕\"\r\n        }\r\n      ],\r\n      apiJurisdictionIdValue: [\r\n        {\r\n          value: \"选项1\",\r\n          label: \"黄金糕\"\r\n        }\r\n      ],\r\n      viewJurisdictionIdValue: [\r\n        {\r\n          value: \"选项1\",\r\n          label: \"黄金糕\"\r\n        }\r\n      ],\r\n      identityIdValue: [\r\n        {\r\n          value: \"选项1\",\r\n          label: \"黄金糕\"\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState({})\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      setAddUsers: \"userManagement/setAddUsers\",\r\n      setUpdataUserInfo: \"userManagement/setUpdataUserInfo\",\r\n      setAddIdentity: \"userManagement/setAddIdentity\",\r\n      setAddAuthorityApi: \"userManagement/setAddAuthorityApi\",\r\n      setAddAuthorityView: \"userManagement/setAddAuthorityView\",\r\n      setIdentityApi: \"userManagement/setIdentityApi\",\r\n      setIdentityView: \"userManagement/setIdentityView\"\r\n    }),\r\n    ...mapMutations({}),\r\n    //tab切换\r\n    change(idx) {\r\n      this.idx = idx;\r\n      console.log(this.idx);\r\n    },\r\n    //重置\r\n    reset(idx) {\r\n      if (idx === 1) {\r\n        this.userId = \"\";\r\n        this.userName = \"\";\r\n        this.pwd = \"\";\r\n        this.identityId = \"\";\r\n      } else if (idx === 2) {\r\n        this.identityName = \"\";\r\n      } else if (idx === 3) {\r\n        this.apiJurisdictionName = \"\";\r\n        this.apiJurisdictionUrl = \"\";\r\n        this.apiJurisdictionMethod = \"\";\r\n      } else if (idx === 4) {\r\n        this.existingView = \"\";\r\n      } else if (idx === 5) {\r\n        this.identityId = \"\";\r\n        this.apiJurisdictionId = \"\";\r\n      } else if (idx === 6) {\r\n        this.identityId = \"\";\r\n        this.viewJurisdictionId = \"\";\r\n      }\r\n    },\r\n    //用户校验\r\n    userVerify() {\r\n      if (!this.userName) {\r\n        this.$message({\r\n          showClose: true,\r\n          message: \"请输入用户名\",\r\n          type: \"warning\"\r\n        });\r\n        return false;\r\n      } else if (!this.pwd) {\r\n        this.$message({\r\n          showClose: true,\r\n          message: \"请输入用户密码\",\r\n          type: \"warning\"\r\n        });\r\n        return false;\r\n      } else if (!this.identityId) {\r\n        this.$message({\r\n          showClose: true,\r\n          message: \"请选择身份id\",\r\n          type: \"warning\"\r\n        });\r\n        return false;\r\n      }\r\n    },\r\n    //用户\r\n    async user() {\r\n      console.log(this.userName, this.pwd, this.identityId);\r\n      if (this.idx === 0) {\r\n        console.log(1111);\r\n        await this.userVerify();\r\n        await this.setAddUsers({\r\n          user_name: this.userName,\r\n          user_pwd: this.pwd,\r\n          identity_id: this.identityId\r\n        });\r\n      } else {\r\n        console.log(2222);\r\n\r\n        if (!this.identityId) {\r\n          this.$message({\r\n            showClose: true,\r\n            message: \"请选择用户id\",\r\n            type: \"warning\"\r\n          });\r\n          return false;\r\n        }\r\n        await this.userVerify();\r\n        await this.setUpdataUserInfo({\r\n          user_id: this.userId2,\r\n          user_name: this.userName,\r\n          user_pwd: this.pwd,\r\n          identity_id: this.identityId\r\n        });\r\n      }\r\n    },\r\n    //身份\r\n    async identity() {\r\n      if (!this.identityName) {\r\n        this.$message({\r\n          showClose: true,\r\n          message: \"请输入身份名称\",\r\n          type: \"warning\"\r\n        });\r\n        return false;\r\n      }\r\n      await this.setAddIdentity({\r\n        identity_text: this.identityName\r\n      });\r\n    },\r\n    //api接口权限\r\n    async jurisdiction() {\r\n      if (!this.apiJurisdictionName) {\r\n        this.$message({\r\n          showClose: true,\r\n          message: \"请输入api接口权限名称\",\r\n          type: \"warning\"\r\n        });\r\n        return false;\r\n      }\r\n      if (!this.apiJurisdictionUrl) {\r\n        this.$message({\r\n          showClose: true,\r\n          message: \"请输入api接口权限url\",\r\n          type: \"warning\"\r\n        });\r\n        return false;\r\n      }\r\n      if (!this.apiJurisdictionMethod) {\r\n        this.$message({\r\n          showClose: true,\r\n          message: \"请输入api接口权限方法\",\r\n          type: \"warning\"\r\n        });\r\n        return false;\r\n      }\r\n      await this.setAddAuthorityApi({\r\n        api_authority_text: this.apiJurisdictionName,\r\n        api_authority_url: this.apiJurisdictionUrl,\r\n        api_authority_mehtod: this.apiJurisdictionMethod\r\n      });\r\n    },\r\n    //视图接口权限\r\n    async view() {\r\n      if (!this.existingView) {\r\n        this.$message({\r\n          showClose: true,\r\n          message: \"请选择已有视图\",\r\n          type: \"warning\"\r\n        });\r\n        return false;\r\n      }\r\n      await this.setAddAuthorityView({\r\n        view_authority_text: this.existingView\r\n        // view_id: this. 视图id 字符串\r\n      });\r\n    },\r\n    // 给身份设置api接口权限\r\n    async api() {\r\n      if (!this.identityId) {\r\n        this.$message({\r\n          showClose: true,\r\n          message: \"请选择身份id\",\r\n          type: \"warning\"\r\n        });\r\n        return false;\r\n      }\r\n      if (!this.apiJurisdictionId) {\r\n        this.$message({\r\n          showClose: true,\r\n          message: \"请选择api接口权限id\",\r\n          type: \"warning\"\r\n        });\r\n        return false;\r\n      }\r\n      await this.setIdentityApi({\r\n        identity_id: this.identityId,\r\n        api_authority_id: this.apiJurisdictionId\r\n      });\r\n    },\r\n    //给身份设定视图权限\r\n    async set() {\r\n      if (!this.identityId) {\r\n        this.$message({\r\n          showClose: true,\r\n          message: \"请选择身份id\",\r\n          type: \"warning\"\r\n        });\r\n        return false;\r\n      }\r\n      if (!this.viewJurisdictionId) {\r\n        this.$message({\r\n          showClose: true,\r\n          message: \"请选择视图权限id\",\r\n          type: \"warning\"\r\n        });\r\n        return false;\r\n      }\r\n      await this.setIdentityView({\r\n        identity_id: this.identityId,\r\n        view_id: this.viewJurisdictionId\r\n      });\r\n    }\r\n  }\r\n};\r\n",null]}