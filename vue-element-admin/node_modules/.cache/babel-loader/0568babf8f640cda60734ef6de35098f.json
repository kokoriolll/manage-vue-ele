{"remainingRequest":"C:\\Users\\ASUS\\Desktop\\project1\\manage-vue-ele\\vue-element-admin\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\ASUS\\Desktop\\project1\\manage-vue-ele\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\ASUS\\Desktop\\project1\\manage-vue-ele\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ASUS\\Desktop\\project1\\manage-vue-ele\\vue-element-admin\\src\\views\\login\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ASUS\\Desktop\\project1\\manage-vue-ele\\vue-element-admin\\src\\views\\login\\index.vue","mtime":1555462265372},{"path":"C:\\Users\\ASUS\\Desktop\\project1\\manage-vue-ele\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1555040407437},{"path":"C:\\Users\\ASUS\\Desktop\\project1\\manage-vue-ele\\vue-element-admin\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1550018570393},{"path":"C:\\Users\\ASUS\\Desktop\\project1\\manage-vue-ele\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1555040407437},{"path":"C:\\Users\\ASUS\\Desktop\\project1\\manage-vue-ele\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1555040409456}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"C:\\\\Users\\\\ASUS\\\\Desktop\\\\project1\\\\manage-vue-ele\\\\vue-element-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"C:\\\\Users\\\\ASUS\\\\Desktop\\\\project1\\\\manage-vue-ele\\\\vue-element-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"C:\\\\Users\\\\ASUS\\\\Desktop\\\\project1\\\\manage-vue-ele\\\\vue-element-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/asyncToGenerator\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"C:\\\\Users\\\\ASUS\\\\Desktop\\\\project1\\\\manage-vue-ele\\\\vue-element-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/objectSpread\"));\n\nvar _validate = require(\"@/utils/validate\");\n\nvar _LangSelect = _interopRequireDefault(require(\"@/components/LangSelect\"));\n\nvar _socialSignin = _interopRequireDefault(require(\"./socialSignin\"));\n\nvar _vuex = require(\"vuex\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: \"Login\",\n  components: {\n    LangSelect: _LangSelect.default,\n    SocialSign: _socialSignin.default\n  },\n  data: function data() {\n    var validateUsername = function validateUsername(rule, value, callback) {\n      if (!value) {\n        callback(new Error(\"Please enter the correct user name\"));\n      } else {\n        callback();\n      }\n    };\n\n    var validatePassword = function validatePassword(rule, value, callback) {\n      if (value.length < 6) {\n        callback(new Error(\"The password can not be less than 6 digits\"));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      loginForm: {\n        username: \"chengjy\",\n        password: \"Chengjianye1997!\"\n      },\n      loginRules: {\n        username: [{\n          required: true,\n          trigger: \"blur\",\n          validator: validateUsername\n        }],\n        password: [{\n          required: true,\n          trigger: \"blur\",\n          validator: validatePassword\n        }]\n      },\n      passwordType: \"password\",\n      capsTooltip: false,\n      loading: false,\n      showDialog: false,\n      redirect: undefined\n    };\n  },\n  watch: {\n    $route: {\n      handler: function handler(route) {\n        this.redirect = route.query && route.query.redirect;\n      },\n      immediate: true\n    }\n  },\n  created: function created() {// window.addEventListener('storage', this.afterQRScan)\n  },\n  mounted: function mounted() {\n    if (this.loginForm.username === \"\") {\n      this.$refs.username.focus();\n    } else if (this.loginForm.password === \"\") {\n      this.$refs.password.focus();\n    }\n  },\n  destroyed: function destroyed() {// window.removeEventListener('storage', this.afterQRScan)\n  },\n  methods: (0, _objectSpread2.default)({}, (0, _vuex.mapActions)({\n    login: \"user/login\",\n    generateRoutes: \"permission/generateRoutes\"\n  }), {\n    showPwd: function showPwd() {\n      var _this = this;\n\n      if (this.passwordType === \"password\") {\n        this.passwordType = \"\";\n      } else {\n        this.passwordType = \"password\";\n      }\n\n      this.$nextTick(function () {\n        _this.$refs.password.focus();\n      });\n    },\n    handleLogin: function handleLogin() {\n      var _this2 = this;\n\n      this.$refs.loginForm.validate(\n      /*#__PURE__*/\n      function () {\n        var _ref = (0, _asyncToGenerator2.default)(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee(valid) {\n          var res;\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  if (!valid) {\n                    _context.next = 11;\n                    break;\n                  }\n\n                  _context.next = 3;\n                  return _this2.login(_this2.loginForm);\n\n                case 3:\n                  res = _context.sent;\n                  console.log(\"res.login\", res);\n\n                  if (!(res.code == 1)) {\n                    _context.next = 9;\n                    break;\n                  }\n\n                  _context.next = 8;\n                  return _this2.generateRoutes([]);\n\n                case 8:\n                  _this2.$router.push({\n                    path: _this2.redirect || \"/\"\n                  });\n\n                case 9:\n                  _context.next = 13;\n                  break;\n\n                case 11:\n                  console.log(\"error submit!!\");\n                  return _context.abrupt(\"return\", false);\n\n                case 13:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    } // afterQRScan() {\n    //   if (e.key === 'x-admin-oauth-code') {\n    //     const code = getQueryObject(e.newValue)\n    //     const codeMap = {\n    //       wechat: 'code',\n    //       tencent: 'code'\n    //     }\n    //     const type = codeMap[this.auth_type]\n    //     const codeName = code[type]\n    //     if (codeName) {\n    //       this.$store.dispatch('LoginByThirdparty', codeName).then(() => {\n    //         this.$router.push({ path: this.redirect || '/' })\n    //       })\n    //     } else {\n    //       alert('第三方登录失败')\n    //     }\n    //   }\n    // }\n\n  })\n};\nexports.default = _default;",null]}